<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>A look inside our Jenkins Pipeline - how we make reliable stuff | Red Ant</title>
<meta property="og:title" content="A look inside our Jenkins Pipeline - how we make reliable stuff" />
<meta name="author" content="Ben Still" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to" />
<meta property="og:description" content="A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to" />
<link rel="canonical" href="https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/" />
<meta property="og:url" content="https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/" />
<meta property="og:site_name" content="Red Ant" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-02-28T00:00:00+00:00" />
<script type="application/ld+json">
{"name":null,"description":"A quick outline of how we’re using Jenkins and the Pipeline view to visualise where our builds are up to","author":{"@type":"Person","name":"Ben Still"},"@type":"BlogPosting","url":"https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/","publisher":null,"image":null,"headline":"A look inside our Jenkins Pipeline - how we make reliable stuff","dateModified":"2012-02-28T00:00:00+00:00","datePublished":"2012-02-28T00:00:00+00:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"https://redant.com.au/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  <link rel="icon" href="/assets/webpack/favicon.f6ca223af6a4fa1fb307.ico">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="stylesheet" href="/assets/webpack/vendor.9ab886372a49df2db72a.css" />
  <link rel="stylesheet" href="/assets/webpack/app.9e8bea470ab6695e8330.css" />
  <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
  <![endif]-->
<meta name="google-site-verification" content="uky3VJEeD3NAFHIK0V4KLdxlYF7fGGXJYyyt96LLe78" />
  <!-- Fonts -->
  <script src="//use.typekit.net/apo0vqh.js"></script>
  <script>try{Typekit.load();}catch(e){}</script>

  
    <style>.async-hide { opacity: 0 !important} </style>

<script>
  var gtmId = window.location.host.includes("redant.com.au")
    ? "GTM-P7QNBDH"
    : "GTM-N3CM249";

  // Google Optimize page hiding snippet
  (function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;
  h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
  (a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);
  })(window,document.documentElement,'async-hide','dataLayer',500,{[gtmId]:true});

  // Google Tag Manager
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer',gtmId);
</script>

  

  
    <link rel="amphtml" href="https://redant.com.au/amp/automated-testing/a-look-inside-our-jenkins-pipeline-how-we-make-reliable-stuff.html">
  
</head>

<body class="">
  <div class="main-layout">
    
  <nav class="navbar nav-overlay">

  <div class="container">
    <div class="d-flex w-100">
      <div class="">
        <a href="/" class="navbar-brand">
          <img class="logo" src="/assets/webpack/logo.5f2c38db28fb4124af2e.svg" alt="Red Ant logo" />
        </a>
      </div>
      <div class="w-100">
        <div class="d-flex justify-content-end align-items-center">
          <a class="contact-us mr-3 text-sm" href="tel:+61292678300">Contact Us <strong class="d-block d-sm-inline-block">(02) 9267 8300</strong></a>
          <div class="nav-toggle-icon float-right">
            <span></span>
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container nav-links mx-4 mx-md-auto">
    <ul class="links">
      <li>
        <a href="/" class="home-link">Home</a>
      </li>
      <li>
        <a href="/about/" class="about-link">About Red Ant</a>
      </li>
      <li>
        <a href="/our-approach/" class="our-approach-link">Our Approach</a>
      </li>
      <li>
        <a href="/portfolio/" class="portfolio-link">Portfolio</a>
      </li>
      <li>
        <a href="/blog/" class="news-and-ideas-link">Blog</a>
      </li>
      <li>
        <a href="/jobs/" class="jobs-link">Careers</a>
      </li>
      <li>
        <a href="/contact-us/">Contact</a>
      </li>
    </ul>
  </div>
</nav>
<div class="nav-spacer"></div>

    <section class="project-content pt-3 pb-5 text-md">
      <div class="container">
        <div class="row mb-4">
          <div id="breadcrumbs" class="text-capitalize mt-5">
  
  <a href="/">Home</a>
  
    
      / <a href="/automated-testing/">Automated testing</a>
    
  
    
      / A look inside our jenkins pipeline how we make reliable stuff
    
  
</div>

          <div class="col-12 mt-3 pt-5">
            <h1 class="post-title pb-2">A look inside our Jenkins Pipeline - how we make reliable stuff</h1>
            <hr>
          </div>
        </div>
        <div class="row">
          <div class="col-md-8">
            <p>It works like this: all of our team our beavering away making stuff. As soon as a developer finishes working on something, they commit their work to Github (which is where we save our work). The gotcha is that sometimes that thing they were working on then breaks someone else’s code. Or something which was working is no longer working as planned. Ideally wed like to find out about this as soon as possible.</p>

<p>Jenkins sees a change has been made, and then grabs that version of the project, builds a completely new version of the site and content, and then starts running some automated tests. These tests make sure that each of the parts of the project work properly. Once everything passes, it gets a green light and Jenkins publishes this version of the code to a server (so us humans can take a look).</p>

<p>The big advantage to using a CI server like Jenkins is that any change gets tested immediately. We don’t rely on a human to test these, as (lets be honest here) they can be a bit unreliable. They get sick, they get distracted, they skip steps in testing, and they complain when asked to do boring tasks like check the same thing again and again and again. Jenkins on the other hand is always there, happily running in the background.</p>

<p>What can be tricky is understanding exactly where Jenkins is up to. Has the build just started, or is the testing almost complete? Is my change being tested now or is it sitting in a queue? Often several different changes are made by several developers at once, so it is useful to know which is getting tested and if it broke, where. This is where the <strong>Pipeline</strong> comes in - particularly when there are 3 or 4 anxious developers all trying to get their work through to Production.</p>

<h2 id="jenkins-pipeline">Jenkins Pipeline</h2>

<p>The <strong>Jenkins Pipeline</strong> gives us an overview of where these tests are up to. We have a development and a master Jenkins Pipeline. Development is for releases to the development branch, and these get pushed to a Dev server. Master is the master branch, and is for all of our <a href="/ruby-on-rails-devops/how-a-project-gets-tested-and-deployed-with-gitflow/">hotfixes</a> and tested releases. This gets pushed to UAT and then finally Production. All of this might sound like a bit of a cumbersome process with many steps (you might have worked with developers who say hey- I don’t need to test my stuff. I made it so I know it is Awesome!). But in this everything is completely automated so it needs very little effort- all a developer needs to do is commit a change to kick it all off. The upside is that we can have a high degree of confidence that everything works as planned.</p>

<h2 id="what-the-jenkins-pipeline-looks-like">What the Jenkins Pipeline looks like</h2>

<p>This is what the Jenkins Pipeline looks like when there are no tests running for our <a href="/portfolio/12wbt/">Michelle Bridges 12WBT project</a>. Each row is a build that relates directly to a commit, and the columns are steps in the process. Green is good, and it means that test group has all passed. You can see in this screenshot that there was a build which failed the Cucumber tests (the big red box) earlier today, followed by another which then passed.</p>

<p><img src="/assets/uploads/2012/jenkins-pipeline-start.png" alt="Jenkins Pipeline before a build has been kicked off" /></p>

<h2 id="step-1-rspec">Step 1: rspec</h2>

<p><img src="/assets/uploads/2012/jenkins-pipeline-rspec.png" alt="Jenkins Pipeline showing RSpec test running" /></p>

<p>This is what the pipeline looks like when Ive just kicked off a build. A new row appears for my test. Everything goes blue and the active step is yellow. The Rspec tests are the various code tests which check to see if specific functionality is working.</p>

<h2 id="step-2-cucumber">Step 2: cucumber</h2>

<p><img src="/assets/uploads/2012/jenkins-pipeline-cucumber.png" alt="Jenkins Pipeline showing Cucumber test running" /></p>

<p>Once the Rspec tests pass, that box turns green, and then the next step starts - in this case Cucumber. This is running through all of the Cucumber stories that we use to describe how different features work.</p>

<h2 id="step-3-metrics">Step 3: metrics</h2>

<p><img src="/assets/uploads/2012/jenkins-pipeline-metrics.png" alt="Pipeline showing MetricFu test running" /></p>

<p>The Cucumber tests all get completed, and that box turns green. The next box is metrics, which we check with a set of tools called <a href="http://metric-fu.rubyforge.org/">MetricFu (MetricFu Ruby Gem)</a>. These run checks to test quality in the code- looking for telltale signs like two parts of code that do the exact same thing. While this might not be the final word on whether code is in fact good, we can pick up sudden spikes in complexity or a drop in code test coverage. We’ve also added in Breakman to check for security flaws.</p>

<h2 id="step-4-deploy--check">Step 4: deploy &amp; check</h2>

<p><img src="/assets/uploads/2012/jenkins-pipeline-deploy.png" alt="Jenkins Pipeline showing final post deploy test running" /></p>

<p>Finally, the tested code is then deployed to the server using Capistrano. In this example (development pipeline) the version is pushed to our development server. There are a few checks that need to get done once everything is in place- for example a credit card payment process that relies on a 3rd party payment service. These are difficult to do inside the virtual environment of the CI server, so they get done on an actual server.</p>

<h2 id="step-5-all-green---release-the-pandas">Step 5: All green - release the Pandas</h2>

<p><img src="/assets/uploads/2012/jenkins-pipeline-end.png" alt="Jenkins Pipeline once a build is complete" /></p>

<p>Once all the steps are done, everything goes green. You might notice that this screenshot of the Jenkins Pipeline has a different release number- that is because I am slow and Jenkins is fast. It started on another build before I had a chance to screenshot. I am learning to live with my various shortcomings and deficiencies.</p>

<p>Next steps are to keep on <a href="http://arrrrcamp.be/videos/2011/corey-haines—-fast-rails-tests/">improving our test times</a>, since the faster these tests can run the sooner we can publish changes. When were busy well occasionally get a backlog of changes, Jenkins becomes Jerkins and it can take a while for all of the builds to push through.</p>

<p>Overall, using Jenkins and the Pipeline view has been extremely useful. We get good visibility over where different builds are at, and what has failed where. Jenkins itself has helped us improve our process flow - particularly when used with <a href="/ruby-on-rails-devops/how-a-project-gets-tested-and-deployed-with-gitflow/">Gitflow</a></p>

          </div>
          <div class="col-md-4">
            <hr class="hr-blue my-0">
            
              <div class="project-detail-container section-border">
                <p>A quick outline of how we're using Jenkins and the Pipeline view to visualise where our builds are up to</p>
              </div>
            
            <div class="row gallery-tiles">
  
</div>

<div id="gallery-modal"
  class="modal fade"
  data-backdrop="static"
  aria-labelledby="gallery-modal"
  aria-hidden="true"
  role="dialog"
  tabindex="-1">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <section class="carousel-wrapper">
        <div class="carousel-arrows"></div>
        <div class="carousel">
          
        </div>
      </section>
    </div>
  </div>
</div>

          </div>
        </div>
      </div>
    </section>
    <section class="pb-5 d-none d-sm-block" data-read-more>
    </section>
    
  <section id="footer" class="ga-section py-5 bg-gray-light text-md">
    <div class="container">
      <div class="row">
        <div class="col-md-7">
          <p>
            Red Ant is a leading Ruby development agency. We're super cross functional. We provide a blended team of UX, strategy and technology. Local not offshore. Deliver quickly and then iterate.
          </p>
          <p>
            We use Open Source software, and apply an Agile project delivery methodology. We firmly believe in a blended team of designers, developers and strategists building the best digital experiences.
          </p>
        </div>

        <div class="col-md-5">
          <strong>Some of our work</strong>

          <ul class="unstyled-list mt-2">
            <li>
              <a href="/portfolio/tribe-influencer-marketplace/">Tribe</a>: Marketplace for influencers
            </li>
            <li>
              <a href="/portfolio/12wbt/">12WBT</a>: Health and Fitness app
            </li>
            <li>
              <a href="/portfolio/campaign-xpress/">CX</a>: Real Estate advertising engine
            </li>
            <li>
              <a href="/portfolio/nps-medicinewise/">NPS Medicinewise:</a> Govt drug information site
            </li>
          </ul>
        </div>
      </div>
    </div>
  </section>


<footer class="footer py-5">
  <div id="contact" class="container">
	  <div class="row">
      <div class="col-md-4">
        <ul class="unstyled-list">
          <li>
            <strong>Email </strong>
            <a href="mailto:info@redant.com.au">info@redant.com.au</a>
          </li>
          <li>
            <strong>Phone </strong>
            <a href="tel:+61292678300">+61 2 9267 8300</a>
          </li>
          <li>
            <a href="https://red-ant.github.io/codepact-agreements/privacy-f6855e8d5e271a3c942ad9ef47ffac5a.html">
              Red Ant Privacy Policy
            </a>
          </li>
        </ul>
      </div>

    	<div class="col-md-4">
        <ul class="unstyled-list icon-list">
          <li>
            <i class="fa fa-map-marker"></i>
            <a href="https://goo.gl/maps/aecDcCLqKCm" target="_blank">
              Find us on street view
            </a>
          </li>
          <li>
            <i class="fa fa-twitter"></i>
            <a href="https://twitter.com/r_e_d_a_n_t" target="_blank">
              The most mundane Twitter, ever
            </a>
          </li>
          <li>
            <i class="fa fa-linkedin-square"></i>
            <a href="https://www.linkedin.com/company/76862" target="_blank">
              Stalk us on Linkedin
            </a>
          </li>
        </ul>
      </div>

      <div class="col-md-4">
        493 Bourke St, Surry Hills Sydney NSW 2010 Australia
        <br>
        ABN 87 081 223 252
      </div>
      <div class="d-flex flex-row flex-wrap justify-content-center mt-4 mt-md-0">
        <a href="/blog/" class="pri mr-2">Blog</a> |
        <a href="/automated-testing/" class="mx-2">Automated Testing</a> |
        <a href="/mobile/" class="mx-2">Mobile</a> |
        <a href="/software-development/" class="mx-2">Ruby Development</a> |
        <a href="/our-work/" class="mx-2">Our Work</a> |
        <a href="/red-ant-stuff/" class="mx-2">Red Ant</a> |
        <a href="/ruby-on-rails-devops/" class="mx-2">Devops</a> |
        <a href="/ruby-on-rails/" class="mx-2">Ruby on Rails developer</a> |
        <a href="/strategy/" class="mx-2">Strategy</a> |
        <a href="/our-work/" class="mx-2">Work updates</a> |
        <a href="/tool-reviews/" class="mx-2">Tool Reviews</a> | <br/>
      	<a href="/portfolio/" class="mx-2">Our Portfolio</a> |
      	<a href="/about/" class="mx-2">About Red Ant</a> |
      	<a href="/our-approach/" class="ml-2">
          Ruby on Rails Development Approach
        </a>
      </div>
      <div class="col text-center mt-3">
        &copy; Red Ant 2019
      </div>
    </div>
  </div>
</footer>

    <script src="/assets/webpack/vendor.9ab886372a49df2db72a.js"></script>
<script src="/assets/webpack/app.9e8bea470ab6695e8330.js"></script>

  </div>
</body>
</html>
